# 失业日记
2020/07/15 公司解散 留守在家 发愤图强 开始温习书本 为下一个旅程做更好的准备

---
###2020年07月30日10:47:32

今天早上温习了一下rabbit mq 的基础知识：
    
 rabbitmq
 优点：
 解耦，比喻系统A原接入B，C系统，如果将来还需要接入D系统就要改代码。
 提高系统速度，接入消息队列，可以让主线走完，次要业务可以异步消息处理，提高系统速度。
 防止缓存雪崩，当缓存层都失效的时候，可以通过消息队列可以控制速率防止所有连接直接打到数据库。
 
 缺点：
 降低系统可用性：原本只需要维护2个系统， 现在加入mq之后也得维护mq可用。
 增加业务复杂性：因为多了一个环节，所以需要考虑系统可靠性，比喻消息掉失怎样处理，重发怎样确保一致性幂等性。
 
 vhost:
 简单来说就是不同的库，独立的一套mq
 
 关键字exchange,queue,chanel:
 chanel是tcp下的虚拟连接，mq所有amqp指令都是经过chanel进入，经过交换机分发到指定queue。
 消息创建的时候设定有个routing key,到达交换机的时候，消息的Key值和队列的key进行匹配，匹配方式有三种：
 diect(1绑1),fanout(1绑所有),topic(支持正则匹配，分发所有匹配成功的队列1:N)，匹配成功会分发到指定
 消息队列上面，匹配不上就进入黑洞。
 
 
 消息的可靠性：
 通过confirm机制进行一个nack的回响操作
 
 防止消息掉失：
 mq支持持久化
 
 ---
 ###2020年07月30日12:06:31
 
 