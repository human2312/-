# 失业日记
2020/07/15 公司解散 留守在家 发愤图强 开始温习书本 为下一个旅程做更好的准备

---
###2020年07月30日10:47:32

今天早上温习了一下rabbit mq 的基础知识：
    
 rabbitmq
 优点：
 解耦，比喻系统A原接入B，C系统，如果将来还需要接入D系统就要改代码。
 提高系统速度，接入消息队列，可以让主线走完，次要业务可以异步消息处理，提高系统速度。
 防止缓存雪崩，当缓存层都失效的时候，可以通过消息队列可以控制速率防止所有连接直接打到数据库。
 
 缺点：
 降低系统可用性：原本只需要维护2个系统， 现在加入mq之后也得维护mq可用。
 增加业务复杂性：因为多了一个环节，所以需要考虑系统可靠性，比喻消息掉失怎样处理，重发怎样确保一致性幂等性。
 
 vhost:
 简单来说就是不同的库，独立的一套mq
 
 关键字exchange,queue,chanel:
 chanel是tcp下的虚拟连接，mq所有amqp指令都是经过chanel进入，经过交换机分发到指定queue。
 消息创建的时候设定有个routing key,到达交换机的时候，消息的Key值和队列的key进行匹配，匹配方式有三种：
 diect(1绑1),fanout(1绑所有),topic(支持正则匹配，分发所有匹配成功的队列1:N)，匹配成功会分发到指定
 消息队列上面，匹配不上就进入黑洞。
 
 
 消息的可靠性：
 通过confirm机制进行一个nack的回响操作
 
 防止消息掉失：
 mq支持持久化
 
 ---
 ###2020年07月30日12:06:31
 
 下午去面试了，一个golang方向的面试。
 应该是游戏公司，离我居住地方有点远，当练练手吧。
 大中午的，奔波了一个多钟，外面38度，去到公司，居然hr连个水都不递一杯。算了，渴着吧，怎么也是在求工作。
 
 第一个技术官来了，先来个自我介绍，哎，我做了一个很烂的自我介绍，连项目里面的内容都突出不了，太匆忙了吧。
 问的问题主要有：
 先问channel需不需要关闭，我记得貌似是需要关闭的。往一个已经关闭的channel里面写数据，我回答panic，
 估计不是很满意。。。问没关闭会不会导致垃圾回收，然后问了垃圾回收方法有哪些，回复了引用计算法，标记-清除法
 ，三色标记法，分代清除法。。。
 问了go func处理爬虫之类的是不是能发起无穷的协程，可能是我理解有误，到最后才注意到爬虫是tcp类型的请求，
 限制于socket生成数，大概6万多个吧。
 问了redis的五种数据结构类型，其中问到zset有序集合，这个有序集合底层实现，是如何实现在去重集合里面排序，
 这个真没回答上来。
 问了网络的题目，tcp的三种握手协议，这个倒回答上来了，也问到为什么不是2，4次，我就说3次是最符合tcp的理念
 （可靠的通讯前提下最高效交互方式），然后他问我知不知道四次挥手，知道原理不。
 关于mysql的，问了索引的方式，我只回答了唯一索引,index索引，hash索引。。。估计面试官不是想我只回答这些。
 问到golang连接mysql需不需要连接池。我忘记了golang实现mysql是自带连接池的，直接回答mysql属于tcp连接
 类型，可以用tcp通用连接池去实现。
 问了mysql的悲观锁和乐观锁，我直接放弃了，后来我记起来，是关于能不能读的问题。。。不知道准不准。
 问了golang面向对象方面的实现。
 
 总结：对golang，特别是协程等。对Mysql，需要加固的知识点。
 
 